"use strict";(self.webpackChunkmongkol_serey_cms=self.webpackChunkmongkol_serey_cms||[]).push([[5245],{92630:function(e,r,t){var n=t(74165),s=t(15861),a=t(38233),i=t(17657),o={getCustomerList:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var t,s,o,c,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.page,s=r.search,o=r.size,c=r.type,e.next=3,a.Z.get(i.J.customersList,{params:{page:t,size:o||10,search:s,customerType:c}});case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),getCustomerDetails:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.id,e.next=3,a.Z.get(i.J.customerDetails.replace(":id","".concat(t)));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),postNewCustomer:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.cusRequest,e.next=3,a.Z.post(i.J.addCustomer,t);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),updateCustomer:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var t,s,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.cusRequest,s=r.id,e.next=3,a.Z.put(i.J.updateCustomer.replace(":id","".concat(s)),t);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),deleteCustomer:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.id,e.next=3,a.Z.delete(i.J.deletCustomer.replace(":id","".concat(t)));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};r.Z=o},35245:function(e,r,t){t.r(r),t.d(r,{default:function(){return N}});var n=t(1413),s=t(74165),a=t(15861),i=t(39709),o=t(35527),c=t(10266),u=t(53767),l=t(23786),d=t(36151),m=t(32451),p=t(92630),f=t(20473),Z=t(5247),h=t(40967),v=t(62643),x=t(84753),g=t(89437),j=t(37072),y=t(98507),b=t(85451),S=t(72791),w=t(61134),C=t(57689),T=t(82139),E=t(17657),k=t(14485),z=t(80184);function N(){var e=(0,y.Z)(),r=e.errorState,t=e.setErorrState,N=(0,C.s0)(),_=(0,C.UO)(),q=_&&_.id,V=(0,w.cI)(),P=V.control,F=V.handleSubmit,L=V.setValue,Q=V.reset,W=V.watch,R=V.getValues,D=V.resetField,G=(0,b.Z)({disName:R("district"),proName:R("province")}),A=G.provinces,M=G.districts,O=G.communes,H=G.setDistrictId,J=G.setProvinceId,B=G.communeLoading,U=G.districtLoading,I=G.provinceLoading,K=G.errorGeo;(0,S.useEffect)((function(){K&&t(K)}),[K]);var X=(0,m.Z)((0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.getCustomerDetails({id:q&&+q||void 0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{manual:!1,ready:void 0!==q,refreshDeps:[q],onError:function(e){return t({error:!0,message:e.message})},onSuccess:function(e){var r=e.customer.telegram_name||e.customer.facebook_name,t=e.customer.telegram_name?T.cW.TG:T.cW.FB;L("customerName",e.customer.customer_name),L("location",e.customer.location),L("gender",e.customer.gender||T.qs.OTHER),L("phoneNumber",e.customer.contact_number),L("street",e.customer.street),L("house",e.customer.house),L("province",e.customer.province),L("district",e.customer.district),L("commune",e.customer.commune),L("payment",e.customer.defaultPayment||""),L("socialType",t),L("social",r),L("images",e.customer.images)}}).loading,Y=(0,m.Z)(p.Z.postNewCustomer,{manual:!0,onError:function(e){return t({error:!0,message:e.message})},onSuccess:function(e){return e&&N(E.u.customers.root)}}),$=Y.loading,ee=Y.run,re=(0,m.Z)(p.Z.updateCustomer,{manual:!0,onError:function(e){return t({error:!0,message:e.message})},onSuccess:function(){N(E.u.customers.root)}}),te=re.loading,ne=re.run,se=(0,m.Z)(f.Z.uploadFile,{manual:!0,onError:function(e){return t({error:!0,message:e.message})},onSuccess:function(e){L("images",e.path)}}),ae=se.run,ie=se.loading;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Z.Z,{open:r.error,onCloseDialog:function(){t({error:!r.error,message:""})},errorMessage:r.message}),(0,z.jsx)(g.Z,{title:q?"Update Customer":"Create New Customer"}),(0,z.jsx)(o.Z,{sx:{m:3,mt:0,p:2},children:(0,z.jsx)(c.Z,{maxWidth:"sm",component:"form",onSubmit:F((function(e){var r=e.socialType===T.cW.TG?e.social:"",t=e.socialType===T.cW.FB?e.social:"";_.id?ne({id:_.id,cusRequest:{customer_name:e.customerName,facebook_name:t,telegram_name:r,contact_number:e.phoneNumber,gender:e.gender,house:e.house,street:e.street,commune:e.commune,district:e.district,province:e.province,location:e.location,customerType:T.lh.CUSTOMER,images:e.images,defaultPayment:e.payment}}):ee({cusRequest:{customer_name:e.customerName,facebook_name:t,telegram_name:r,contact_number:e.phoneNumber,gender:e.gender,house:e.house,street:e.street,commune:e.commune,district:e.district,province:e.province,location:e.location,customerType:T.lh.CUSTOMER,images:e.images,defaultPayment:e.payment}})})),children:(0,z.jsx)(u.Z,{direction:"column",spacing:2,children:X?(0,z.jsx)(h.Z,{}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(u.Z,{direction:"row",spacing:2,children:(0,z.jsx)(j.Z,{src:W("images"),onChange:function(e,r){ae(r),L("images",e)}})}),(0,z.jsxs)(u.Z,{direction:"row",spacing:2,children:[(0,z.jsx)(w.Qr,{defaultValue:"",control:P,name:"customerName",rules:{required:{value:!0,message:"Field is required"}},render:function(e){var r=e.field,t=e.fieldState;return(0,z.jsx)(x.Z,(0,n.Z)({label:"Customer Name",size:"small",fieldState:t},r))}}),(0,z.jsx)(w.Qr,{defaultValue:"",control:P,name:"location",render:function(e){var r=e.field,t=e.fieldState;return(0,z.jsx)(x.Z,(0,n.Z)({label:"Location",size:"small",fieldState:t},r))}})]}),(0,z.jsxs)(u.Z,{direction:"row",spacing:2,children:[(0,z.jsx)(w.Qr,{defaultValue:"",control:P,name:"phoneNumber",rules:{required:{value:!0,message:"Field is required"}},render:function(e){var r=e.field,t=e.fieldState;return(0,z.jsx)(x.Z,(0,n.Z)({label:"Phone Number",size:"small",fieldState:t},r))}}),(0,z.jsx)(w.Qr,{defaultValue:T.qs.OTHER,control:P,name:"gender",render:function(e){var r,t=e.field,s=e.fieldState;return(0,z.jsx)(x.Z,{label:"Gender",children:(0,z.jsxs)(v.Z,(0,n.Z)((0,n.Z)({select:!0,SelectProps:{displayEmpty:!0},size:"small",helperText:null===(r=s.error)||void 0===r?void 0:r.message},t),{},{children:[(0,z.jsx)(l.Z,{value:T.qs.OTHER,children:"Other"}),(0,z.jsx)(l.Z,{value:T.qs.MALE,children:"Male"}),(0,z.jsx)(l.Z,{value:T.qs.FEMALE,children:"Female"})]}))})}})]}),(0,z.jsxs)(u.Z,{direction:"row",spacing:2,children:[(0,z.jsx)(w.Qr,{defaultValue:"",control:P,name:"street",render:function(e){var r=e.field,t=e.fieldState;return(0,z.jsx)(x.Z,(0,n.Z)({label:"Street",size:"small",fieldState:t},r))}}),(0,z.jsx)(w.Qr,{defaultValue:"",control:P,name:"house",render:function(e){var r=e.field,t=e.fieldState;return(0,z.jsx)(x.Z,(0,n.Z)({label:"House",size:"small",fieldState:t},r))}})]}),(0,z.jsxs)(u.Z,{direction:"row",spacing:2,children:[(0,z.jsx)(w.Qr,{defaultValue:"",control:P,name:"province",rules:{required:{value:!0,message:"Field is required"}},render:function(e){var r,t=e.field,s=e.fieldState;return(0,z.jsx)(x.Z,{label:"Province",children:(0,z.jsxs)(v.Z,(0,n.Z)((0,n.Z)({select:!0,SelectProps:{displayEmpty:!0},size:"small",helperText:null===(r=s.error)||void 0===r?void 0:r.message},t),{},{children:[(0,z.jsx)(l.Z,{value:"",children:I?"Loading...":"Select Provicne"}),!I&&(null===A||void 0===A?void 0:A.map((function(e){return(0,z.jsx)(l.Z,{value:e.name,onClick:function(){J("".concat(e.id)),D("district"),D("commune")},children:e.name},e.name)})))]}))})}}),(0,z.jsx)(w.Qr,{defaultValue:"",control:P,name:"district",render:function(e){var r,t=e.field,s=e.fieldState;return(0,z.jsx)(x.Z,{label:"District",children:(0,z.jsxs)(v.Z,(0,n.Z)((0,n.Z)({select:!0,SelectProps:{displayEmpty:!0},size:"small",helperText:null===(r=s.error)||void 0===r?void 0:r.message},t),{},{children:[(0,z.jsx)(l.Z,{value:"",children:U?"Loading...":"Select District"}),!U&&(null===M||void 0===M?void 0:M.map((function(e){return(0,z.jsx)(l.Z,{value:e.name,onClick:function(){H("".concat(e.id)),D("commune")},children:e.name},e.name)})))]}))})}})]}),(0,z.jsxs)(u.Z,{direction:"row",spacing:2,children:[(0,z.jsx)(w.Qr,{defaultValue:"",control:P,name:"commune",render:function(e){var r,t=e.field,s=e.fieldState;return(0,z.jsx)(x.Z,{label:"Commune",children:(0,z.jsxs)(v.Z,(0,n.Z)((0,n.Z)({select:!0,SelectProps:{displayEmpty:!0},size:"small",helperText:null===(r=s.error)||void 0===r?void 0:r.message},t),{},{children:[(0,z.jsx)(l.Z,{value:"",children:B?"Loading...":"Select Commune"}),!B&&(null===O||void 0===O?void 0:O.map((function(e){return(0,z.jsx)(l.Z,{value:e.name,children:e.name},e.name)})))]}))})}}),(0,z.jsx)(w.Qr,{defaultValue:"",control:P,name:"payment",render:function(e){var r=e.field,t=e.fieldState;return(0,z.jsx)(x.Z,{label:"Default Payment",fieldState:t,children:(0,z.jsxs)(v.Z,(0,n.Z)((0,n.Z)({select:!0,defaultValue:"",SelectProps:{displayEmpty:!0},size:"small"},r),{},{children:[(0,z.jsx)(l.Z,{value:"Aba",children:"ABA"}),(0,z.jsx)(l.Z,{value:"Acleda",children:"ACLEDA"})]}))})}})]}),(0,z.jsx)(u.Z,{direction:"row",children:(0,z.jsx)(x.Z,{label:"Social Media",size:"small",children:(0,z.jsxs)(u.Z,{direction:"row",spacing:1,children:[(0,z.jsx)(w.Qr,{defaultValue:"TG",control:P,name:"socialType",render:function(e){var r=e.field;return(0,z.jsxs)(v.Z,(0,n.Z)((0,n.Z)({select:!0,defaultValue:T.cW.TG,SelectProps:{displayEmpty:!0},size:"small",sx:{width:"40%"}},r),{},{children:[(0,z.jsx)(l.Z,{value:T.cW.FB,children:"Facebook"}),(0,z.jsx)(l.Z,{value:T.cW.TG,children:"Telegram"})]}))}}),(0,z.jsx)(w.Qr,{defaultValue:"",control:P,name:"social",render:function(e){var r=e.field;return(0,z.jsx)(v.Z,(0,n.Z)({fullWidth:!0,size:"small"},r))}})]})})}),(0,z.jsxs)(u.Z,{direction:"row",justifyContent:"space-between",spacing:2,py:2,children:[(0,z.jsx)(d.Z,{size:"large",variant:"outlined",fullWidth:!0,onClick:function(){Q({customerName:"",phoneNumber:"",gender:T.qs.OTHER,street:"",house:"",province:"",district:"",commune:"",payment:"",social:"",socialType:T.cW.TG,location:"",images:""})},children:"Reset"}),(0,z.jsx)(i.Z,{size:"large",loading:$||te||ie,type:"submit",variant:"contained",fullWidth:!0,sx:{background:k.Z.goldGradientMain},children:"Save"})]})]})})})})]})}}}]);
//# sourceMappingURL=5245.b7a467f1.chunk.js.map