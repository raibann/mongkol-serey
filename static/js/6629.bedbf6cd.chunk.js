"use strict";(self.webpackChunkmongkol_serey_cms=self.webpackChunkmongkol_serey_cms||[]).push([[6629],{92630:function(e,r,n){var t=n(74165),a=n(15861),o=n(38233),s=n(17657),i={getCustomerList:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a,i,c,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.page,a=r.search,i=r.size,c=r.type,e.next=3,o.Z.get(s.J.customersList,{params:{page:n,size:i||10,search:a,customerType:c}});case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),getCustomerDetails:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.id,e.next=3,o.Z.get(s.J.customerDetails.replace(":id","".concat(n)));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),postNewCustomer:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.cusRequest,e.next=3,o.Z.post(s.J.addCustomer,n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),updateCustomer:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.cusRequest,a=r.id,e.next=3,o.Z.put(s.J.updateCustomer.replace(":id","".concat(a)),n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),deleteCustomer:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.id,e.next=3,o.Z.delete(s.J.deletCustomer.replace(":id","".concat(n)));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};r.Z=i},20473:function(e,r,n){var t=n(74165),a=n(15861),o=n(74569),s=n.n(o),i="5683327648:AAForuzEywsdCCXFlR04En_Gl7pD34poVl4",c={uploadFile:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("document",r),n.append("chat_id","-4033752446"),e.next=5,s().post("https://api.telegram.org/bot".concat(i,"/sendDocument"),n);case 5:return a=e.sent,e.next=8,s().post("https://api.telegram.org/bot".concat(i,"/getFile"),{file_id:a.data.result.document.file_id});case 8:return o=e.sent,e.abrupt("return",{path:"https://api.telegram.org/file/bot".concat(i,"/").concat(o.data.result.file_path)});case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};r.Z=c},5247:function(e,r,n){var t=n(1413),a=n(45987),o=n(5574),s=n(39157),i=n(53767),c=n(20890),u=n(36151),l=n(69780),d=n(82281),m=n(66254),p=n(80184),f=["open","errorMessage","errorTitle","onCloseDialog","onClose"];r.Z=function(e){var r=e.open,n=e.errorMessage,g=e.errorTitle,h=e.onCloseDialog,Z=(e.onClose,(0,a.Z)(e,f)),x=(0,l.Z)().isSmDown;return(0,p.jsx)(o.Z,(0,t.Z)((0,t.Z)({open:r,fullWidth:!0,maxWidth:"xs",onClose:h},Z),{},{children:(0,p.jsx)(s.Z,{children:(0,p.jsxs)(i.Z,{alignItems:"center",sx:{px:4},spacing:2,children:[(0,p.jsx)(d.Z,{size:x?"40":"80",color:m.Z.palette.primary.main,variant:"Bulk"}),(0,p.jsx)(c.Z,{variant:x?"subtitle1":"h5",noWrap:!0,sx:{fontWeight:function(e){return e.typography.fontWeightBold}},children:g||"OOP!"}),(0,p.jsx)(c.Z,{sx:{color:function(e){return e.palette.error.main}},textAlign:"center",variant:x?"caption":"h5",children:n}),(0,p.jsx)(u.Z,{onClick:h,variant:"contained",sx:{borderRadius:3,px:3,boxShadow:0},children:(0,p.jsx)(c.Z,{color:"white",sx:{textTransform:"capitalize"},children:"OK, cool"})})]})})}))}},37072:function(e,r,n){var t=n(53767),a=n(36151),o=n(93044),s=n(20890),i=n(95101),c=n(18365),u=n(80184);r.Z=function(e){var r=e.label,n=e.src,l=e.onChange,d=void 0===l?function(){return null}:l;return(0,u.jsxs)(t.Z,{width:"100%",alignItems:"center",spacing:1,children:[(0,u.jsxs)(a.Z,{component:"label",sx:{p:1.5,borderRadius:"50%",border:"dashed 1px",borderColor:"divider",bgcolor:"transparent"},color:"inherit",children:[(0,u.jsx)(o.Z,{src:n,sx:{width:135,height:135,cursor:"pointer",bgcolor:"grey.100"},children:(0,u.jsxs)(t.Z,{justifyContent:"center",alignItems:"center",spacing:1,color:"grey.500",children:[(0,u.jsx)(i.Z,{variant:"Bulk",size:28}),(0,u.jsx)(s.Z,{variant:"subtitle2",textTransform:"none",children:"Upload Photo"})]})}),(0,u.jsx)("input",{type:"file",hidden:!0,accept:"image/jpeg, image/png",onChange:function(e){return(0,c.I)(e,d)}})]}),(0,u.jsx)(s.Z,{color:"text.secondary",variant:"subtitle2",whiteSpace:"pre-line",textAlign:"center",children:r||"Allowed *.jpeg, *.jpg, *.png\n        max size of 2MB"})]})}},98507:function(e,r,n){n.d(r,{Z:function(){return o}});var t=n(29439),a=n(72791);function o(){var e=(0,a.useState)({message:"Something went wrong",error:!1}),r=(0,t.Z)(e,2);return{errorState:r[0],setErorrState:r[1]}}},66629:function(e,r,n){n.r(r),n.d(r,{default:function(){return A}});var t=n(1413),a=n(74165),o=n(15861),s=n(39709),i=n(35527),c=n(10266),u=n(53767),l=n(47047),d=n(23786),m=n(36151),p=n(32451),f=n(92630),g=n(20473),h=n(5247),Z=n(62643),x=n(84753),v=n(89437),j=n(37072),b=n(98507),C=n(61134),T=n(57689),w=n(82139),S=n(17657),y=n(14485),E=n(80184);function A(){var e=(0,b.Z)(),r=e.errorState,n=e.setErorrState,A=(0,C.cI)(),O=A.control,N=A.handleSubmit,F=A.setValue,_=A.reset,k=A.watch,M=(0,T.s0)(),R=(0,T.UO)(),z=R&&R.id,D=(0,p.Z)(f.Z.postNewCustomer,{manual:!0,onError:function(e){return n({error:!0,message:e.message})},onSuccess:function(e){return e&&M(S.u.customers.potentialCustomers)}}),W=D.loading,B=D.run,L=(0,p.Z)(f.Z.updateCustomer,{manual:!0,onError:function(e){return n({error:!0,message:e.message})},onSuccess:function(){M(S.u.customers.potentialCustomers)}}),q=L.loading,G=L.run,I=(0,p.Z)((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getCustomerDetails({id:z&&+z||void 0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{manual:!1,ready:void 0!==z,onError:function(e){return n({error:!0,message:e.message})},onSuccess:function(e){var r=e.customer.telegram_name||e.customer.facebook_name,n=e.customer.telegram_name?w.cW.TG:w.cW.FB;F("customerName",e.customer.customer_name),F("location",e.customer.location),F("gender",e.customer.gender||w.qs.OTHER),F("phoneNumber",e.customer.contact_number),F("socialType",n),F("social",r),F("images",e.customer.images),F("note",e.customer.remarks||"")}}).loading,J=(0,p.Z)(g.Z.uploadFile,{manual:!0,onError:function(e){return n({error:!0,message:e.message})},onSuccess:function(e){F("images",e.path)}}),V=J.run,P=J.loading;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(h.Z,{open:r.error,onCloseDialog:function(){n({error:!r.error,message:r.message})},errorTitle:"Failed Authentication",errorMessage:"Something went wrong!"}),(0,E.jsx)(v.Z,{title:R.id?"Update Potential":"Create New Potential"}),(0,E.jsx)(i.Z,{sx:{m:3,mt:0,p:2},children:(0,E.jsxs)(c.Z,{maxWidth:"sm",component:"form",onSubmit:N((function(e){var r=e.socialType===w.cW.TG?e.social:"",n=e.socialType===w.cW.FB?e.social:"";R.id?G({id:R.id,cusRequest:{customer_name:e.customerName,facebook_name:n,telegram_name:r,gender:e.gender,contact_number:e.phoneNumber,customerType:w.lh.POTENTIAL_CUSTOMER,location:e.location,remarks:e.note,images:e.images,commune:"",district:"",house:"",province:"",street:""}}):B({cusRequest:{customer_name:e.customerName,facebook_name:n,telegram_name:r,contact_number:e.phoneNumber,gender:e.gender,customerType:w.lh.POTENTIAL_CUSTOMER,location:e.location,remarks:e.note,images:e.images,commune:"",district:"",house:"",province:"",street:""}})})),children:[(0,E.jsx)(u.Z,{mx:"auto",mb:2,children:(0,E.jsx)(j.Z,{src:k("images"),onChange:function(e,r){V(r),F("images",e)}})}),(0,E.jsx)(u.Z,{direction:"column",spacing:2,children:I?(0,E.jsx)(E.Fragment,{children:Array(4).fill("").map((function(e,r){return(0,E.jsxs)(u.Z,{direction:"row",spacing:2,children:[(0,E.jsx)(l.Z,{variant:"text",animation:"wave",sx:{fontSize:"1rem",width:"50%",height:"50px"}}),(0,E.jsx)(l.Z,{variant:"text",animation:"wave",sx:{fontSize:"1rem",width:"50%",height:"50px"}})]},r)}))}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(u.Z,{direction:"row",spacing:2,children:[(0,E.jsx)(C.Qr,{defaultValue:"",control:O,name:"customerName",rules:{required:{value:!0,message:"Feild is required"}},render:function(e){var r=e.field,n=e.fieldState;return(0,E.jsx)(x.Z,(0,t.Z)({label:"Customer Name",size:"small",fieldState:n},r))}}),(0,E.jsx)(C.Qr,{defaultValue:"",control:O,name:"location",render:function(e){var r=e.field,n=e.fieldState;return(0,E.jsx)(x.Z,(0,t.Z)({label:"Location",size:"small",fieldState:n},r))}})]}),(0,E.jsxs)(u.Z,{direction:"row",spacing:2,children:[(0,E.jsx)(C.Qr,{defaultValue:"",control:O,name:"phoneNumber",rules:{required:{value:!0,message:"Feild is required"}},render:function(e){var r=e.field,n=e.fieldState;return(0,E.jsx)(x.Z,(0,t.Z)({label:"Phone Number",size:"small",fieldState:n},r))}}),(0,E.jsx)(C.Qr,{defaultValue:w.qs.OTHER,control:O,name:"gender",render:function(e){var r,n=e.field,a=e.fieldState;return(0,E.jsx)(x.Z,{label:"Gender",children:(0,E.jsxs)(Z.Z,(0,t.Z)((0,t.Z)({select:!0,defaultValue:"Male",SelectProps:{displayEmpty:!0},size:"small",helperText:null===(r=a.error)||void 0===r?void 0:r.message},n),{},{children:[(0,E.jsx)(d.Z,{value:w.qs.OTHER,children:"Other"}),(0,E.jsx)(d.Z,{value:w.qs.MALE,children:"Male"}),(0,E.jsx)(d.Z,{value:w.qs.FEMALE,children:"Female"})]}))})}})]}),(0,E.jsx)(u.Z,{direction:"row",children:(0,E.jsx)(x.Z,{label:"Social Media",size:"small",children:(0,E.jsxs)(u.Z,{direction:"row",spacing:1,children:[(0,E.jsx)(C.Qr,{defaultValue:"TG",control:O,name:"socialType",render:function(e){var r=e.field;return(0,E.jsxs)(Z.Z,(0,t.Z)((0,t.Z)({select:!0,defaultValue:"",SelectProps:{displayEmpty:!0},size:"small",sx:{width:"40%"}},r),{},{children:[(0,E.jsx)(d.Z,{value:"FB",children:"Facebook"}),(0,E.jsx)(d.Z,{value:"TG",children:"Telegram"})]}))}}),(0,E.jsx)(C.Qr,{defaultValue:"",control:O,name:"social",render:function(e){var r=e.field;return(0,E.jsx)(Z.Z,(0,t.Z)({fullWidth:!0,size:"small"},r))}})]})})}),(0,E.jsx)(C.Qr,{defaultValue:"",control:O,name:"note",render:function(e){var r=e.field,n=e.fieldState;return(0,E.jsx)(x.Z,(0,t.Z)((0,t.Z)({label:"Note...",size:"small",fieldState:n},r),{},{multiline:!0,rows:4}))}}),(0,E.jsxs)(u.Z,{direction:"row",justifyContent:"space-between",spacing:2,py:2,children:[(0,E.jsx)(m.Z,{size:"large",variant:"outlined",fullWidth:!0,onClick:function(){_({customerName:"",location:"",phoneNumber:"",gender:w.qs.OTHER,social:"",socialType:w.cW.TG,note:""})},children:"Reset"}),(0,E.jsx)(s.Z,{size:"large",loading:W||q||P,type:"submit",variant:"contained",fullWidth:!0,sx:{background:y.Z.goldGradientMain},children:"Save"})]})]})})]})})]})}},82139:function(e,r,n){n.d(r,{F5:function(){return h},Pk:function(){return t},V2:function(){return Z},VC:function(){return x},cF:function(){return u},cW:function(){return f},d9:function(){return l},lh:function(){return m},mV:function(){return g},oQ:function(){return d},qs:function(){return p},u7:function(){return c}});var t,a=n(76053),o=n(16856),s=n(66254),i=n(80184),c=["Cash","ABA","ACLEDA","WING","BAKONG","CANADIA","TRUE MONEY"],u={ACLEDA:"#143c6d",ABA:"#005b7a",WING:"#a4c535",BAKONG:"#dc222c",CANADIA:"#D61229",Cash:"#BB9300","TRUE MONEY":"#f88a30"},l=["\u178f\u17bb","\u1785\u17b6\u1793","\u1781\u17d2\u1791\u17c7","\u1793\u17b6\u1780\u17cb","\u1788\u17bb\u178f","m\xb2","\u1782\u17d2\u179a\u17bf\u1784","\u1794\u17d2\u179a\u17a1\u17c4\u17c7","pcs"],d=["Wedding","Birthday","Party","House Warming","Engagement"];a.OhZ,o.Tbc,s.Z.palette.common.black;!function(e){e[e.Jan=1]="Jan",e[e.Feb=2]="Feb",e[e.Mar=3]="Mar",e[e.Apr=4]="Apr",e[e.May=5]="May",e[e.Jun=6]="Jun",e[e.Jul=7]="Jul",e[e.Aug=8]="Aug",e[e.Sep=9]="Sep",e[e.Oct=10]="Oct",e[e.Nov=11]="Nov",e[e.Dec=12]="Dec"}(t||(t={}));var m,p,f,g,h={January:"\u1798\u1780\u179a\u17b6",February:"\u1780\u17bb\u1798\u17d2\u1797\u17c8",March:"\u1798\u17b7\u1793\u17b6",April:"\u1798\u17c1\u179f\u17b6",May:"\u17a7\u179f\u1797\u17b6",June:"\u1798\u17b7\u1790\u17bb\u1793\u17b6",July:"\u1780\u1780\u17d2\u1780\u178a\u17b6",August:"\u179f\u17b8\u17a0\u17b6",September:"\u1780\u1789\u17d2\u1789\u17b6",October:"\u178f\u17bb\u179b\u17b6",November:"\u179c\u17b7\u1785\u17d2\u1786\u17b7\u1780\u17b6",December:"\u1792\u17d2\u1793\u17bc"},Z={week:0,month:1,year:2};!function(e){e.POTENTIAL_CUSTOMER="POTENTIAL_CUSTOMER",e.CUSTOMER="CUSTOMER"}(m||(m={})),function(e){e.OTHER="OTHER",e.MALE="MALE",e.FEMALE="FEMALE"}(p||(p={})),function(e){e.FB="FB",e.TG="TG"}(f||(f={})),function(e){e.STOCK="STOCK",e.NON_STOCK="NON_STOCK"}(g||(g={}));var x={STOCK:"\u1798\u17b6\u1793\u1780\u17d2\u1793\u17bb\u1784\u179f\u17d2\u178f\u17bb\u1780",NON_STOCK:"\u1798\u17b7\u1793\u1798\u17b6\u1793\u179f\u17d2\u178f\u17bb\u1780"}},18365:function(e,r,n){n.d(r,{I:function(){return t}});var t=function(e,r){e.preventDefault();if(e.target){var n=e.target.files;if(n){var t,a=new FileReader;(null===(t=n[0])||void 0===t?void 0:t.size)<=2097152&&["png","jpg","jpeg"].some((function(e){var r;return null===(r=n[0])||void 0===r?void 0:r.type.includes(e)}))?(a.readAsDataURL(n[0]),a.onload=function(){return r(a.result,n[0])}):alert("Unsupported File")}}}}}]);
//# sourceMappingURL=6629.bedbf6cd.chunk.js.map